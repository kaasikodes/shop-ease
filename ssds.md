Please correct and complete the article, also inform me of the corrections made. I would like you to correct and let me know of any incorrect technical info

# Simple Microservice Architectural Diagram & Discusion

Its a always helpful to have to a diagram or picture when things are been explained, and this is still the case in any software project that is been embarked on. Today we'll be discussing the architectural diagram of an e-commerce micro services app. And then proceed to define the services and the deliverables expected from them. We'll then talk briefly on how you can set up a dev environment that matched the diagram we'll be discussing.
The diagram illustrates that requests are received from a client which could be a mobile application or a web browser to the server now an api gateway shich in our case will be implemented with go. The api gateway will the forward the request to the appropriate services, the service can then communicate either synchnously via grpc or asynchronously via the message broker to other servcices and then return an api response to th client via the api gateway service. Now there is an observality & monitoring stack in place to provide visibility to the inner workings of the microservices. Each service will expose a metrics endpoint that promethheus will periodically full from and store in its time series. These will provide insights into relevant information like no of http requests per second, ... which can be used to make better informed decisions like what regions produces the most request, what endpoint is least or most called. Which will help us better improve our system. Logs will be generated by each service and they will be stored, these logs will be rotated and deleted and will not be persissted, but we'll need to store this data in a permananet place and query it as it holds valuable information. In order to do this we will have promtail reads/tail those log files and then push them to loki to be stored. Will likkely inject traceIds into these logs so its easy to link these logs to traces. For traces we'll use an opentelementry sdk to send traces to tempo for storage. We'll then use grafana to connect to loki, prometheus, and tempo and use them as datasources and visaulize those traces, logs, and metrics collected, we create dashboards, make queries on grafaall to provide insights to what is going on on our micro-service system. This is is the first and simplest iteration of our system, we'll move on to much complex setup mainly to ensure scalability. But let's start simple. Now that we've gotten a farly good grasp of what we're building lets setup our dev environment.

## Setting up Dev Environment

Now we've discussed quite a lot. But let's take it step by step.

- For now all microservices will operate on the same server, our local machine, they'll just run on different ports
- For our database setup, we'll have one database server with each service having its own database in our database server. We'll stick to sql for now, but some services might end up using mongodb, postgres or something else. Yes we'll containarize our database as well
- Now for observabilty stack, we'll have them run on our local machine as well, we'll just containarize them as well.
- Here is an sample of our docker-compose file will look.
  ```

  ```

services:
prometheus:
image: prom/prometheus
volumes: - ./prometheus.yml:/etc/prometheus/prometheus.yml
ports: - "9090:9090"

grafana:
image: grafana/grafana
ports: - "4000:3000"
volumes: - grafana-data:/var/lib/grafana
environment: - GF_SECURITY_ADMIN_PASSWORD=admin - GF_SMTP_ENABLED=true - GF_SMTP_HOST=sandbox.smtp.mailtrap.io:2525 - GF_SMTP_USER=6c53d765680ca4 - GF_SMTP_PASSWORD=83175273732073 - GF_SMTP_SKIP_VERIFY=false - GF_SMTP_FROM_ADDRESS=hello@shop-ease.com - GF_SMTP_FROM_NAME=Grafana
depends_on: - prometheus
promtail:
image: grafana/promtail:2.9.0
volumes: - ./promtail-config.yml:/etc/promtail/promtail-config.yml - ../../logs:/var/log/ # <-- where log files will be located
command: -config.file=/etc/promtail/promtail-config.yml
depends_on: - loki

loki:
image: grafana/loki:latest
ports: - "3100:3100"
command: -config.file=/etc/loki/local-config.yaml # Seems this was changed so just checked the container and update accordingly

tempo:
image: grafana/tempo:latest
ports: - "3200:3200" # HTTP endpoint (optional, for debugging) - "4317:4317" # gRPC OTLP receiver - "4318:4318" # HTTP OTLP receiver
command: ["-config.file=/etc/tempo/tempo.yaml"]
volumes: - ./tempo-config.yaml:/etc/tempo/tempo.yaml
zookeeper:
image: confluentinc/cp-zookeeper:latest
environment:
ZOOKEEPER_CLIENT_PORT: 2181
ZOOKEEPER_TICK_TIME: 2000

kafka:
image: confluentinc/cp-kafka:latest
depends_on: - zookeeper
ports: - "9092:9092"
environment:
KAFKA_BROKER_ID: 1
KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://localhost:9092
KAFKA_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1
KAFKA_AUTO_CREATE_TOPICS_ENABLE: 'true'
kafka-ui:
image: provectuslabs/kafka-ui:latest
container_name: kafka-ui
ports: - "8080:8080"
environment: - KAFKA_CLUSTERS_0_NAME=local - KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS=kafka:9092
depends_on: - kafka

volumes:
grafana-data:

```
*
* Set up tools we'll need like envrc, Makefile, air, protoc. And chocolatey for windows users to use to install the aforementioned tools. Expantiate and show how.


Next up

* Building Auth Service
* Notification Service
* Aynchronous communication with Message Brokers - Kafka and Rabbit MQ: Discuss setup add to docker-compose ...
* Building Api Gateway
```
